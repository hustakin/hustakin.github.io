<!DOCTYPE html>





<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    }
  };
</script>

  <meta name="description" content="Docker is a platform for developers and sysadmins to develop, deploy, and run applications with containers. The use of Linux containers to deploy applications is called containerization. Containers ar">
<meta name="keywords" content="Linux,Docker">
<meta property="og:type" content="article">
<meta property="og:title" content="Important Docker commands">
<meta property="og:url" content="http://hustakin.github.io/2017/08/29/important-docker-commands/index.html">
<meta property="og:site_name" content="Frankie Fan">
<meta property="og:description" content="Docker is a platform for developers and sysadmins to develop, deploy, and run applications with containers. The use of Linux containers to deploy applications is called containerization. Containers ar">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://hustakin.github.io/2017/08/29/important-docker-commands/docker.png">
<meta property="og:updated_time" content="2019-10-23T07:19:24.311Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Important Docker commands">
<meta name="twitter:description" content="Docker is a platform for developers and sysadmins to develop, deploy, and run applications with containers. The use of Linux containers to deploy applications is called containerization. Containers ar">
<meta name="twitter:image" content="http://hustakin.github.io/2017/08/29/important-docker-commands/docker.png">
  <link rel="canonical" href="http://hustakin.github.io/2017/08/29/important-docker-commands/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Important Docker commands | Frankie Fan</title>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146443611-1"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-146443611-1');
    }
  </script>








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Frankie Fan</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags<span class="badge">23</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories<span class="badge">4</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives<span class="badge">17</span></a>

  </li>
  </ul>

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hustakin.github.io/2017/08/29/important-docker-commands/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frankie Fan">
      <meta itemprop="description" content="Live for die and let it go.">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Frankie Fan">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">Important Docker commands

            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2017-08-29 11:41:40" itemprop="dateCreated datePublished" datetime="2017-08-29T11:41:40+10:00">2017-08-29</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-10-23 17:19:24" itemprop="dateModified" datetime="2019-10-23T17:19:24+10:00">2019-10-23</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DevOps/" itemprop="url" rel="index"><span itemprop="name">DevOps</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <html><head></head><body><p>Docker is a platform for developers and sysadmins to develop, deploy, and run applications with containers. The use of Linux containers to deploy applications is called containerization. Containers are not new, but their use for easily deploying applications is.<br>Containerization is increasingly popular because containers are:</p>
<ul>
<li>Flexible: Even the most complex applications can be containerized.</li>
<li>Lightweight: Containers leverage and share the host kernel.</li>
<li>Interchangeable: You can deploy updates and upgrades on-the-fly.</li>
<li>Portable: You can build locally, deploy to the cloud, and run anywhere.</li>
<li>Scalable: You can increase and automatically distribute container replicas.</li>
<li>Stackable: You can stack services vertically and on-the-fly.</li>
</ul>
<p><img src="/2017/08/29/important-docker-commands/docker.png" alt="Docker"></p>
<a id="more"></a>


<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><h3 id="Install-Docker"><a href="#Install-Docker" class="headerlink" title="Install Docker"></a>Install Docker</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -sSL https://get.docker.com/ | sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#Docker user group setting (If not set, then docker build or docker-compose down commands would meet error like cannot connect to docker daemon)</span></span><br><span class="line"><span class="comment">#Create the docker group</span></span><br><span class="line">sudo groupadd docker</span><br><span class="line"><span class="comment">#Add your user to the docker group</span></span><br><span class="line">sudo usermod -aG docker <span class="variable">$USER</span></span><br><span class="line"><span class="comment">#Logout and login to the server again</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#BaseDeviceUUID configured in: /var/lib/docker/devicemapper/metadata/deviceset-metadata</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="Install-Docker-machine"><a href="#Install-Docker-machine" class="headerlink" title="Install Docker-machine"></a>Install Docker-machine</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://github.com/docker/machine/releases/download/v0.12.2/docker-machine-`uname -s`-`uname -m` >/tmp/docker-machine &&</span><br><span class="line">chmod +x /tmp/docker-machine &&</span><br><span class="line">sudo cp /tmp/docker-machine /usr/<span class="built_in">local</span>/bin/docker-machine</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Install-Docker-compose"><a href="#Install-Docker-compose" class="headerlink" title="Install Docker-compose"></a>Install Docker-compose</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L https://github.com/docker/compose/releases/download/1.20.0/docker-compose-`uname -s`-`uname -m` -o /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">docker-compose --version</span><br><span class="line"></span><br><span class="line"><span class="comment">#Uninstall docker-compose</span></span><br><span class="line">sudo rm /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br><span class="line"><span class="comment">#Start docker-compose app (read the docker-compose.yml in current folder)</span></span><br><span class="line">docker-compose up</span><br><span class="line"></span><br><span class="line"><span class="comment">#Start docker-compose app in background mode (read the docker-compose.yml in current folder)</span></span><br><span class="line">docker-compose up -d</span><br><span class="line"></span><br><span class="line"><span class="comment">#Remove docker-compose containers</span></span><br><span class="line">docker-compose rm -v</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Install-Fig"><a href="#Install-Fig" class="headerlink" title="Install Fig"></a>Install Fig</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://github.com/docker/fig/releases/download/1.18.0/fig-`uname -s`-`uname -m` > /usr/<span class="built_in">local</span>/bin/fig; chmod +x /usr/<span class="built_in">local</span>/bin/fig</span><br><span class="line">sudo pip install -U fig</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Install-Shipyard"><a href="#Install-Shipyard" class="headerlink" title="Install Shipyard"></a>Install Shipyard</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Master node</span></span><br><span class="line">curl -sSL https://shipyard-project.com/deploy | PORT=8888 bash -s</span><br><span class="line"></span><br><span class="line"><span class="comment">#Slave node</span></span><br><span class="line">curl -sSL https://shipyard-project.com/deploy | ACTION=node DISCOVERY=etcd://http://<master>/:4001 bash -s</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Install-Rancher"><a href="#Install-Rancher" class="headerlink" title="Install Rancher"></a>Install Rancher</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d --restart=unless-stopped -p 8888:8080 rancher/server</span><br><span class="line">sudo docker run -d --restart=always -p 8888:8080 rancher/server</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Docker-containers"><a href="#Docker-containers" class="headerlink" title="Docker containers"></a>Docker containers</h2><h3 id="nsenter"><a href="#nsenter" class="headerlink" title="nsenter"></a>nsenter</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -v /usr/<span class="built_in">local</span>/bin:/target jpetazzo/nsenter</span><br><span class="line"></span><br><span class="line"><span class="comment">#First, figure out the PID of the container you want to enter</span></span><br><span class="line">PID=$(docker inspect --format {{.State.Pid}} <container_name_or_ID>)</span><br><span class="line"><span class="comment">#Then enter the container</span></span><br><span class="line">nsenter --target <span class="variable">$PID</span> --mount --uts --ipc --net --pid</span><br></pre></td></tr></tbody></table></figure>

<h3 id="VSFTPD"><a href="#VSFTPD" class="headerlink" title="VSFTPD"></a>VSFTPD</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Run vsftpd ftp container</span></span><br><span class="line">sudo docker run -d -v /upload:/home/vsftpd \</span><br><span class="line">-p 20:20 -p 21:21 -p 40000-40080:40000-40080 \</span><br><span class="line">-e FTP_USER=user -e FTP_PASS=password \</span><br><span class="line">-e PASV_ADDRESS=120.220.209.94 -e PASV_MIN_PORT=40000 -e PASV_MAX_PORT=40080 \</span><br><span class="line">--name vsftpd --restart=always fauria/vsftpd</span><br><span class="line"></span><br><span class="line"><span class="comment">#Run vsftpd sftp container(only has write permission in /share folder, and need to login in port 2022)</span></span><br><span class="line">sudo docker run --name sftp -v /upload/terminal:/home/terminal/share -p 2022:22 -d atmoz/sftp user:password:1001</span><br><span class="line"></span><br><span class="line"><span class="comment">#Modify the user folder permissions</span></span><br><span class="line">sudo chmod 777 /upload/terminal/</span><br></pre></td></tr></tbody></table></figure>

<h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=admin -d mysql:5.7</span><br></pre></td></tr></tbody></table></figure>

<h3 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Run mongodb container:</span></span><br><span class="line">sudo docker run -p 27017:27017 -v /data/db:/data/db -h mongodb --name mongodb -d mongo</span><br><span class="line"></span><br><span class="line"><span class="comment">#Connect to mongodb</span></span><br><span class="line">sudo docker run -it --link mongodb:mongodb --rm mongo sh -c <span class="string">'exec mongo "mongodb:27017/test"'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Dump db</span></span><br><span class="line">docker run -i --rm --link reliable_mongo_<span class="variable">${RELIABLE_ENV_CONFIG}</span>:mongo -v /tmp/mongodump:/tmp mongo bash -c <span class="string">'mongodump -v --host $MONGO_PORT_27017_TCP_ADDR:$MONGO_PORT_27017_TCP_PORT --db '</span><span class="variable">$1</span><span class="string">' --out=/tmp && chmod 777 /tmp/*'</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -it --link mongodb:mongodb -p 8001:8001 --name springboot-demo <span class="built_in">test</span>/springboot-demo sh</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Run nginx container:</span></span><br><span class="line">docker container run \</span><br><span class="line">-d \</span><br><span class="line">-p 80:80 \</span><br><span class="line">--name nginx \</span><br><span class="line">nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">#Run nginx container with folder mapping:</span></span><br><span class="line">docker container run \</span><br><span class="line">-d \</span><br><span class="line">-p 80:80 \</span><br><span class="line">--name nginx \</span><br><span class="line">--volume /nginx:/usr/share/nginx/html \</span><br><span class="line">nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">#Run nginx container with folder mapping and conf</span></span><br><span class="line">docker container run \</span><br><span class="line">  --name nginx \</span><br><span class="line">  --volume /nginx:/usr/share/nginx/html \</span><br><span class="line">  --volume /nginx/conf:/etc/nginx \</span><br><span class="line">  -p 80:80 \</span><br><span class="line">  -d \</span><br><span class="line">  nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">#nginx.conf default content</span></span><br><span class="line">server {</span><br><span class="line">  listen 80;</span><br><span class="line">  sendfile on;</span><br><span class="line">  default_type application/octet-stream;</span><br><span class="line">  gzip on;</span><br><span class="line">  gzip_http_version 1.1;</span><br><span class="line">  gzip_disable      <span class="string">"MSIE [1-6]\."</span>;</span><br><span class="line">  gzip_min_length   256;</span><br><span class="line">  gzip_vary         on;</span><br><span class="line">  gzip_proxied      expired no-cache no-store private auth;</span><br><span class="line">  gzip_types        text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript;</span><br><span class="line">  gzip_comp_level   9;</span><br><span class="line">  root /usr/share/nginx/html;</span><br><span class="line">  location / {</span><br><span class="line">    try_files <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html =404;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="RStudio"><a href="#RStudio" class="headerlink" title="RStudio"></a>RStudio</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Dockerfile</span></span><br><span class="line">FROM rocker/rstudio</span><br><span class="line">RUN R -e <span class="string">'install.packages("lubridate��)'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Run docker container</span></span><br><span class="line">docker build -t myrstudio .</span><br><span class="line">docker run --name rstudio -d -p 8787:8787 myrstudio</span><br><span class="line"></span><br><span class="line"><span class="comment">#Navigate the RStudio container</span></span><br><span class="line">http://localhost:8787</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Jenkins"><a href="#Jenkins" class="headerlink" title="Jenkins"></a>Jenkins</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Run jenkins</span></span><br><span class="line">sudo docker run --name jenkins -p 8088:8080 -p 50000:50000 -v /var/jenkins_home -d jenkins</span><br><span class="line"></span><br><span class="line"><span class="comment">#Backup jenkins data</span></span><br><span class="line">sudo docker cp jenkins:/var/jenkins_home jenkins_home</span><br><span class="line">sudo tar -czf jenkins_home.tar jenkins_home/</span><br><span class="line"></span><br><span class="line"><span class="comment">#Restore jenkins data</span></span><br><span class="line">sudo tar -xzf jenkins_home.tar</span><br><span class="line">sudo chmod -R 777 jenkins_home</span><br><span class="line">sudo docker cp jenkins_home jenkins:/var</span><br><span class="line">sudo docker restart jenkins</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Wordpress"><a href="#Wordpress" class="headerlink" title="Wordpress"></a>Wordpress</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Install mysql</span></span><br><span class="line">sudo docker run --name mysql -e MYSQL_ROOT_PASSWORD=431197 -d mysql</span><br><span class="line"></span><br><span class="line"><span class="comment">#Install wordpress</span></span><br><span class="line">sudo docker run --name demo_wordpress --link mysql:mysql -p 8080:80 -d wordpress</span><br><span class="line"></span><br><span class="line"><span class="comment">#Browse wordpress homepage: http://[domain]:8080</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="Docker-commands"><a href="#Docker-commands" class="headerlink" title="Docker commands"></a>Docker commands</h2><table>
<thead>
<tr>
<th>Scenarios</th>
<th>Commands</th>
</tr>
</thead>
<tbody><tr>
<td>Docker service</td>
<td>1. <code>sudo service docker start</code> <br>2. <code>sudo service docker restart</code> <br>3. sudo systemctl enable docker</td>
</tr>
<tr>
<td>Docker service automatic start</td>
<td><code>sudo systemctl enable docker</code></td>
</tr>
<tr>
<td>Login DockerHub</td>
<td><code>sudo docker login</code></td>
</tr>
<tr>
<td>Check nginx configuration</td>
<td><code>/usr/nginx/sbin/nginx -t</code></td>
</tr>
<tr>
<td>Listen on 2375 for docker rest api</td>
<td><code>sudo dockerd -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock &</code></td>
</tr>
<tr>
<td>Inspect the container changes</td>
<td><code>docker diff jenkins</code></td>
</tr>
<tr>
<td>Commit the docker image from container</td>
<td><code>docker commit -m "finish the CI configuration for servers in jenkins" jenkins test/demo</code></td>
</tr>
<tr>
<td>Push the docker image to DockerHub</td>
<td><code>docker push test/demo</code></td>
</tr>
</tbody></table>
<h2 id="Basic-commands"><a href="#Basic-commands" class="headerlink" title="Basic commands"></a>Basic commands</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">sudo docker info</span><br><span class="line">sudo docker ps -a</span><br><span class="line">sudo docker run --name deamon -d ubuntu:latest /bin/sh -c <span class="string">"while true; do echo hello world; sleep 1; done"</span></span><br><span class="line">sudo docker logs -ft deamon</span><br><span class="line">sudo  docker logs --tail=100 deamon</span><br><span class="line">sudo docker top deamon</span><br><span class="line">sudo docker <span class="built_in">exec</span> -d deamon touch /etc/test_file</span><br><span class="line">sudo docker start deamon</span><br><span class="line">sudo docker inspect deamon</span><br><span class="line">sudo docker inspect --format=<span class="string">'{{ .NetworkSettings.IPAddress}}'</span> develop</span><br><span class="line">sudo docker rm d7cb3aad80d0</span><br><span class="line">sudo docker build --no-cache -t=<span class="string">"hustakin/develop"</span> .</span><br><span class="line">sudo docker run -d -p 8080:80 --name develop hustakin/develop nginx -g <span class="string">"daemon off;"</span></span><br><span class="line">sudo docker run -d -P --name develop hustakin/develop nginx -g <span class="string">"daemon off;"</span></span><br><span class="line">sudo docker <span class="built_in">history</span> hustakin/develop</span><br><span class="line">sudo docker port develop 80</span><br><span class="line">docker <span class="built_in">kill</span> $(docker ps -a -q)</span><br><span class="line">sudo docker rm $(docker ps -a -q)</span><br><span class="line">sudo docker run -t -i --name develop develop /bin/bash</span><br><span class="line">sudo docker stats deamon</span><br><span class="line">sudo docker system df</span><br><span class="line">sudo docker <span class="built_in">history</span> jenkins</span><br><span class="line">docker system prune</span><br><span class="line">docker system df -v</span><br><span class="line">docker rmi $(docker images -q)</span><br><span class="line">docker volume rm $(docker volume ls -qf dangling=<span class="literal">true</span>)</span><br><span class="line">journalctl -r -u docker   (logs of docker engine)</span><br><span class="line">journalctl -u docker.service   (logs of docker engine)</span><br><span class="line">systemctl status docker.service(logs of starting docker engine)</span><br><span class="line">journalctl -xe (detailed logs of starting docker engine)</span><br></pre></td></tr></tbody></table></figure></body></html>
    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a>
            
              <a href="/tags/Docker/" rel="tag"><i class="fa fa-tag"></i> Docker</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2017/08/31/important-linux-commands/" rel="prev" title="Important linux commands">
                  Important linux commands <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/uploads/avatar.png"
      alt="Frankie Fan">
  <p class="site-author-name" itemprop="name">Frankie Fan</p>
  <div class="site-description motion-element" itemprop="description">Live for die and let it go.</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">17</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
      
        
      
        <a href="https://github.com/hustakin" title="GitHub &rarr; https://github.com/hustakin" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
      </span>
    
      <span class="links-of-author-item">
      
      
      
        
      
        <a href="mailto:hustakin@gmail.com" title="E-Mail &rarr; mailto:hustakin@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
      </span>
    
      <span class="links-of-author-item">
      
      
      
        
      
        <a href="https://www.linkedin.com/in/hustakin/" title="LinkedIn &rarr; https://www.linkedin.com/in/hustakin/" rel="noopener" target="_blank"><i class="fa fa-fw fa-linkedin"></i></a>
      </span>
    
      <span class="links-of-author-item">
      
      
      
        
      
        <a href="https://twitter.com/hustakin" title="Twitter &rarr; https://twitter.com/hustakin" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i></a>
      </span>
    
      <span class="links-of-author-item">
      
      
      
        
      
        <a href="https://www.facebook.com/hustakin" title="FB Page &rarr; https://www.facebook.com/hustakin" rel="noopener" target="_blank"><i class="fa fa-fw fa-facebook"></i></a>
      </span>
    
  </div>



        </div>
      </div>
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Install"><span class="nav-number">1.</span> <span class="nav-text">Install</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-Docker"><span class="nav-number">1.1.</span> <span class="nav-text">Install Docker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-Docker-machine"><span class="nav-number">1.2.</span> <span class="nav-text">Install Docker-machine</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-Docker-compose"><span class="nav-number">1.3.</span> <span class="nav-text">Install Docker-compose</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-Fig"><span class="nav-number">1.4.</span> <span class="nav-text">Install Fig</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-Shipyard"><span class="nav-number">1.5.</span> <span class="nav-text">Install Shipyard</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-Rancher"><span class="nav-number">1.6.</span> <span class="nav-text">Install Rancher</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-containers"><span class="nav-number">2.</span> <span class="nav-text">Docker containers</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#nsenter"><span class="nav-number">2.1.</span> <span class="nav-text">nsenter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VSFTPD"><span class="nav-number">2.2.</span> <span class="nav-text">VSFTPD</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL"><span class="nav-number">2.3.</span> <span class="nav-text">MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MongoDB"><span class="nav-number">2.4.</span> <span class="nav-text">MongoDB</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringBoot"><span class="nav-number">2.5.</span> <span class="nav-text">SpringBoot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Nginx"><span class="nav-number">2.6.</span> <span class="nav-text">Nginx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RStudio"><span class="nav-number">2.7.</span> <span class="nav-text">RStudio</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Jenkins"><span class="nav-number">2.8.</span> <span class="nav-text">Jenkins</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Wordpress"><span class="nav-number">2.9.</span> <span class="nav-text">Wordpress</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-commands"><span class="nav-number">3.</span> <span class="nav-text">Docker commands</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Basic-commands"><span class="nav-number">4.</span> <span class="nav-text">Basic commands</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Frankie Fan</span>
</div>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon"><i class="fa fa-user"></i></span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon"><i class="fa fa-eye"></i></span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>


        








        
      </div>
    </footer>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/affix.js?v=7.3.0"></script>
  <script src="/js/schemes/pisces.js?v=7.3.0"></script>



<script src="/js/next-boot.js?v=7.3.0"></script>




  




























  

  

  


  
  <script src="/js/scrollspy.js?v=7.3.0"></script>
<script src="/js/post-details.js?v=7.3.0"></script>


</body>
</html>
